# 网页逻辑

### 1. 分享

1. 正常分享页面
2. hash页面，用于计数，当有效时，后台返回网址，不正确时，由前端自行跳转
3. 用户点击 hash 分享，由前端带此参数向后端请求，后端返回是否有效，返回所需页面数据
4. 用户点击 hash 分享有效，后端在返回前，进行[浏览记录]



### 2. 计数模块(use-records)

#### 2.1. 通用计数服务 - 数据结构

    `time`  : 使用时间
    `uid`   : 用户id
    `k1`    : 分类1
    `k2`    : 分类2
    `v1`    : 主值
    `v2`    : 次值
    `n`     : 使用数量
    `json`  : 其它数据


#### 2.2. 通用计数服务 - 接口

1. `select(field, where)`根据条件，模拟 medoo，获取数据
1. `add(条件, 数量)`
1. `record(数据)`
    
#### 2.3. 推广 产能/项目

##### 2.3.1. 推广时

    `time`  : 使用时间
    `uid`   : 用户id
    `k1`    : 'steefac'/'steeproj'
    `k2`    : '推广'
    `v1`    : facid
    `v2`    : hash
    `n`     : 推广到的用户数量
    `json`  : 其它数据

##### 2.3.2. 推广后

    `time`  : 使用时间
    `uid`   : 用户id
    `k1`    : 'steefac'/'steeproj'
    `k2`    : '推广'
    `v1`    : facid
    `v2`    : hash
    `n`     : 1
    `json`  : 其它数据


#### 2.4. 详情查看 产能/项目

    `time`  : 使用时间
    `uid`   : 用户id
    `k1`    : 'steefac'/'steeproj'
    `k2`    : '详情查看'
    `v1`    : facid
    `v2`    : 公司名称
    `json`  : 其它数据

#### 2.5. 一般浏览记录

    `time`  : 使用时间
    `uid`   : 用户id
    `k1`    : 页面
    `k2`    : '推广'
    `v1`    : facid
    `v2`    : hash
    `json`  : 其它数据


### 3.权限模块

#### 3.1. 通用权限服务

    `module`: 模块名称
    `uid`   : 用户id
    `type`  : 权限类型
    `name`  : 权限名称
    `t1`    : 生效日期
    `t2`    : 失效日期


#### 3.2. 角色管理

    `module`: 模块名称
    `uid`   :  'role'
    `type`  : 角色名称
    `name`  : 拥有的权限
    `t1`    : 生效日期
    `t2`    : 失效日期
    
    






